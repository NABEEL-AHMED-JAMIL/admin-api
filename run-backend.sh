#!/usr/bin/env bash

echo "*********************************************************************************************"
echo "********************************* Model Repo ************************************************"
echo "*********************************************************************************************"

# step 1
echo "cd model"
cd model || exit

# step 2
echo "mvn clean install"
mvn clean install
STATUS=$?

if [ $STATUS -eq 0 ]; then
	echo "*********************************************************************************************"
	echo "********************************* Common Repo ************************************************"
	echo "*********************************************************************************************"
	
	# step 3
	echo "cd .."
	cd ..

	# step 4
	echo "cd common"
	cd common || exit

	# step 5
	echo "mvn clean install"
	mvn clean install
	STATUS=$?

	if [ $STATUS -eq 0 ]; then
		echo "*********************************************************************************************"
		echo "********************************* Admin Api Repo *********************************************"
		echo "*********************************************************************************************"
		
		# step 6
		echo "cd .."
		cd ..

		# step 7
		echo "cd admin-api"
		cd admin-api || exit

		# step 8
		echo "mvn spring-boot:run"
		mvn spring-boot:run
		STATUS=$?

		if [ $STATUS -eq 0 ]; then
			echo "*********************************************************************************************"
			echo "*********************************    Build Success  *****************************************"
			echo "*********************************************************************************************"
		else
			echo "*********************************************************************************************"
			echo "*********************************    Build Fail     *****************************************"
			echo "*********************************************************************************************"
		fi
	else
		echo "*********************************************************************************************"
		echo "*********************************    Build Fail     *****************************************"
		echo "*********************************************************************************************"
	fi
else
	echo "*********************************************************************************************"
	echo "*********************************    Build Fail     *****************************************"
	echo "*********************************************************************************************"
fi
